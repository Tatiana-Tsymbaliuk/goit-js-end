{"mappings":"AACA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,2BAC7BC,KAAMF,SAASG,cAAc,OAC7BC,cAAeJ,SAASC,cAAc,wBAChCI,QAASL,SAASC,cAAc,aAChCK,OAAQN,SAASC,cAAc,WAC/BM,eAAgBP,SAASC,cAAc,sBAI/CH,EAAKS,eAAeC,MAAMC,UAAY,OAEnBC,MAAM,2DACxBC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACL,MAAMC,EAAQD,EAAKE,KAAI,EAACC,UAAEA,KACnB,8DAA8DA,gCAAwCA,eAI7G,OAFAnB,EAAKS,eAAeW,mBAAmB,YAAaH,EAAMI,KAAK,KACxDC,QAAQC,IAAIN,GACZA,CAAK,IA+CbO,eAAeC,IAUP,IAAKT,QAPPU,cAlCYF,WACV,MAAMG,QAAYf,MACF,+DAA+DgB,aAAaC,QA9B3E,wBAkCXC,QAAcH,EAAIZ,OAExB,OADAO,QAAQC,IAAIO,GACLA,CAAK,EA0BGC,GAAYlB,MAAKG,GACDA,EAAKE,KAAIc,GACTA,MAKlBN,UACG1B,EAAKQ,OAAOyB,YAAcL,aAAaC,QAtEtC,qBA8CjB7B,EAAKI,KAAO,uGAGsBY,KAAKkB,+FAGXlB,KAAKmB,mDACJnB,KAAKoB,8CAmBlBpC,EAAKM,cAAcc,mBAAmB,YAAapB,EAAKI,OA1DhF,WACQ,IAAIK,EAAiBP,SAASmC,iBAAiB,qBAC/C,IAAKC,QAAQ7B,EACL6B,KAAKC,iBAAiB,SAASC,IACvBZ,aAAaa,QAlBZ,oBAkBsCD,EAAEE,OAAOC,QAAQC,SAAS,G,CAyDjFC,E,CAIRC,YAAW,IAAMrB,KAAe","sources":["src/index.js"],"sourcesContent":["//import { bookCardTemplates } from './templates';\nconst refs = {\n  list: document.querySelector('.bestSellers__container'),\n  card: document.createElement('div'),\n  categoryField: document.querySelector('.shop-card__category'),\n        loadBtn: document.querySelector('load-more'),\n        output: document.querySelector(\".output\"),\n        categoriesList: document.querySelector('.categories__list'), \n};\nconst LOCALSTORAGE_KEY = \"selected-category\";\n\nrefs.categoriesList.style.listStyle = 'none';\n\nconst fetchArray = fetch('https://books-backend.p.goit.global/books/category-list')\n.then(response => response.json())\n.then(data => {\n\tconst array = data.map(({ list_name }) => {\n\treturn `<li class = \"categories__item\"><a href = \"\" data-category='${list_name}'class = \"categories__link\">${list_name}</a></li>`\n\t})\n\trefs.categoriesList.insertAdjacentHTML('beforeend', array.join(''));\n        console.log(array)\n\treturn array;\n});\nfunction hendelList() {\n        let categoriesList = document.querySelectorAll('.categories__item');\n        for (item of categoriesList) {\n                item.addEventListener('click', e => {\n                        localStorage.setItem(LOCALSTORAGE_KEY, e.target.dataset.category);\n                });\n        }\n}\n\n//console.log(LOCALSTORAGE_KEY);\n //localStorage.setItem(LOCALSTORAGE_KEY, \"Trade Fiction Paperback\");\n//localStorage.setItem(\"selected-category\", \"Series Books\");\n\n//------------------Запрос на API\nconst fetchBook = async () => {       \n        const res = await fetch(\n                        `https://books-backend.p.goit.global/books/category?category=${localStorage.getItem(\n                                LOCALSTORAGE_KEY\n                        )}`\n                );\n        const books = await res.json();\n        console.log(books);\n        return books;       \n};\n\n//fetchBook();\n// function updateOutput() {\n//         refs.output.textContent = localStorage.getItem(LOCALSTORAGE_KEY);       \n// }\n\nfunction rendeSelectedCategory() {\n              \nreturn (refs.card = `  \n  <div class='shop-card'>\n  <div class='image-block'>\n    <img class='image-block__image' src=${data.book_image} />\n  </div>\n  <div class='shop-card__meta'>\n    <div class='shop-card__title'>${data.title}</div>\n    <div class='shop-card__author'>${data.author}</div>\n  </div\n  </div>\n  </div>\n`);\n}\nasync function renderFetch() {\n         //refs.list.innerHTML = '';\n//if (localStorage.getItem('selected-category')) {\n      promises = await fetchBook().then(data => {\n                        const result = data.map(value => {\n                                return value;\n                        });\n                        return result;\n                });\n                //refs.categoryField.innerHTML = refs.category;\n        for (data of promises) {\n                        refs.output.textContent = localStorage.getItem(LOCALSTORAGE_KEY);  \n                        rendeSelectedCategory();\n                        refs.categoryField.insertAdjacentHTML('beforeend', refs.card);\n                }\n      \n        hendelList();\n  //} \n\n}\nsetTimeout(() => renderFetch(), 1000);\n\n// a.addEventListener('click', handleClick);\n"],"names":["$1f0dc3b9307be026$var$refs","list","document","querySelector","card","createElement","categoryField","loadBtn","output","categoriesList","style","listStyle","fetch","then","response","json","data","array","map","list_name","insertAdjacentHTML","join","console","log","async","$1f0dc3b9307be026$var$renderFetch","promises","res","localStorage","getItem","books","$1f0dc3b9307be026$var$fetchBook","value","textContent","book_image","title","author","querySelectorAll","item","addEventListener","e","setItem","target","dataset","category","$1f0dc3b9307be026$var$hendelList","setTimeout"],"version":3,"file":"index.97ad200e.js.map"}